{
    "model": {
        "base_model": "Qwen/Qwen3-1.7B",
        "teacher_model": "Qwen/Qwen2.5-1.5B-Instruct",
        "is_do_alignment": false,
        "alignment_strategy": "first",
        "projector": {
            "type": "AllInOneProjector",
            "params": {
                "hidden_dim": 1024,
                "weight_hidden_dim": 1024,
                "num_layers": 3,
                "dropout": 0.1,
                "activation": "gelu",
                "use_layer_norm": true,
                "use_residual": true,
                "use_swiglu": true,
                "use_concat": true,
                "gate_granularity": "scalar",
                "gate_depends_on_input": false,
                "gate_input_features": "target_key",
                "gate_init_value": 0.0,
                "weight_granularity": "head_merged",
                "weight_depends_on_input": true,
                "weight_input_features": "target_projected_key",
                "weight_init_value": 0.0,
                "use_gumbel": true,
                "initial_temperature": 1.0,
                "final_temperature": 0.001,
                "preserve_target_weight": false,
                "add_self": true,
                "anneal_steps": 112,
                "scalar_temperature": 1.0,
                "max_sequence_length": 8192
            }
        },
        "mapping": "last_aligned"
    },
    "training": {
        "learning_rate": 1e-4,
        "weight_decay": 0.01,
        "num_epochs": 1,
        "max_length": 1024,
        "device": "cuda",
        "scheduler_type": "linear",
        "warmup_ratio": 0.1,
        "max_grad_norm": 1.0,
        "gradient_accumulation_steps": 2,
        "per_device_train_batch_size": 8,
        "num_processes": 8,
        "freeze": ["teacher","base"],
        "seed": 42
    },
    "output": {
        "output_dir": "local/checkpoints/1.7B+1.5B_test",
        "save_steps": 500,
        "eval_steps": 100,
        "wandb_config": {
            "project": "Rosetta",
            "mode": "online",
            "entity": "nics-efc",
            "run_name": "1.7B+1.5B_test_all_in_one"
        }
    },
    "data": {
        "type": "OpenHermesChatDataset",
        "kwargs": {
            "split": "train",
            "max_word_count": 1024,
            "num_samples": 15000
        },
        "train_ratio": 0.99
    }
}
